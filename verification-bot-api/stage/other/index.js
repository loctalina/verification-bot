"use strict";



const Markup = require('telegraf/markup');
const Scene = require('telegraf/scenes/base');


const handler = () => {

  const other = new Scene('other');

  other.enter((ctx) => {
    const log = `[BOT][${ctx.from.id}] - - [${__dirname.slice(49)}]`;
    winston.info(`${log} - - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª –≤ —Å—Ü–µ–Ω—É.`);

    ctx.reply("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞, –Ω–∞–ø–∏—à–∏ /help, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ —Ç—ã –º–æ–∂–µ—à—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.", Markup
      .keyboard(['üí° –ü–æ–º–æ—â—å'])
      .oneTime()
      .resize()
      .extra()
    );

  });

  other.hears(/^(üí° )?–ü–æ–º–æ—â—å$/gi, (ctx) => {
    const log = `[BOT][${ctx.from.id}] - - [${__dirname.slice(49)}]`;
    winston.info(`${log} - - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª "–ü–æ–º–æ—â—å".`);

    winston.info(`${log} - - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å—Ü–µ–Ω–∞ –ø–æ–º–æ—â–∏.`);
    ctx.scene.enter('help');
    winston.info(`${log} - - –ü–æ–∫–∏–¥–∞–µ–º —Å—Ü–µ–Ω—É.`);
    ctx.scene.leave();
    
  }); 

  other.on('message', (ctx, next) => {
    const log = `[BOT][${ctx.from.id}] - - [${__dirname.slice(49)}]`;
    winston.info(`${log} - - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª —Ç–æ, —á—Ç–æ –Ω–µ –æ–∂–∏–¥–∞–ª–æ—Å—å.`);

    winston.info(`${log} - - –ü–æ–∫–∏–¥–∞–µ–º —Å—Ü–µ–Ω—É.`);
    ctx.scene.leave();
    winston.info(`${log} - - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –¥–∞–ª—å—à–µ.`);
    next();

  });

  return other;
};




module.exports = handler;
